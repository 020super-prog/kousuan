# 小学口算助手 - 项目开发指南

## 📱 项目简介

小学口算助手是一款专为小学生（1-6年级）及家长打造的微信小程序，提供全面的数学口算练习、智能批改和学习管理功能。

### 核心特色
- ✅ **智能出题**: 根据年级和题型自动生成练习题目
- ✅ **即时反馈**: 答题后立即显示结果，正确绿色、错误红色高亮
- ✅ **错题管理**: 自动收集错题，支持分类筛选和专项重练
- ✅ **数据统计**: 可视化展示学习进度和正确率趋势
- 🚧 **拍照批改**: OCR识别手写作业（待开发）
- 🚧 **PDF生成**: 导出纸质练习卷（待开发）

---

## 🎨 设计规范

### 色彩体系
```
主色调 - 智慧蓝: #4A90E2
辅助色 - 活力橙: #FF6B35
成功色: #27AE60
错误色: #E74C3C
背景色: #F8F9FA
文字主色: #2C3E50
文字次要: #95A5A6
```

### UI组件库
- **TDesign小程序组件库 v1.5.0**
- 全局引入的组件：Button、Cell、Icon、Input、Dialog、Message、Picker、Radio、Checkbox等

---

## 📂 项目结构

```
miniprogram/
├── pages/              # 页面目录
│   ├── home/          # 首页 - 练习中心入口
│   ├── practice/      # 口算练习页面
│   ├── result/        # 练习结果页面
│   ├── camera/        # 拍照批改页面
│   ├── mistakes/      # 错题本页面
│   └── profile/       # 个人中心页面
├── utils/             # 工具类
│   └── questionGenerator.js  # 题目生成器
├── images/            # 图片资源
├── app.js             # 小程序入口
├── app.json           # 全局配置
└── app.wxss           # 全局样式
```

---

## 🚀 已完成功能

### 1️⃣ 底部导航
- ✅ 四个Tab页：首页、拍照批改、错题本、我的
- ✅ 激活状态使用智慧蓝#4A90E2

### 2️⃣ 首页 - 练习中心
- ✅ 快捷练习入口（加法、减法、乘法、除法、混合运算）
- ✅ 数的分解与组合（占位，待开发）
- ✅ 单位换算练习（占位，待开发）
- ✅ PDF试卷生成（占位，待开发）
- ✅ 今日练习统计展示

### 3️⃣ 口算练习功能
**题目生成**
- ✅ 支持5种题型：加法、减法、乘法、除法、混合运算
- ✅ 根据年级自动适配数值范围
- ✅ 自动去重，避免重复题目

**在线答题**
- ✅ 大号题目显示，易于阅读
- ✅ 自定义数字键盘输入
- ✅ 即时反馈动画（正确绿色对勾、错误红色叉号）
- ✅ 实时计时和进度显示
- ✅ 震动和音效反馈（可设置）

**结果统计**
- ✅ 分数展示（优秀/良好/需改进三种状态）
- ✅ 答对/答错/用时统计
- ✅ 个性化鼓励语
- ✅ 支持再练一次、查看错题、分享成绩

### 4️⃣ 错题本管理
- ✅ 错题自动归档
- ✅ 按题型筛选（全部/加法/减法/乘法/除法/混合）
- ✅ 错题详情展示（你的答案 vs 正确答案）
- ✅ 单题重练（待实现）
- ✅ 标记已掌握
- ✅ 批量操作（生成练习卷/删除）

### 5️⃣ 个人中心
- ✅ 微信一键登录
- ✅ 学习统计（总题数、平均正确率、练习时长）
- ✅ 功能设置（音效开关、震动反馈开关）
- ✅ 关于我们、用户协议、反馈入口

### 6️⃣ 数据持久化
- ✅ 本地存储练习记录（wx.setStorageSync）
- ✅ 错题本数据保存
- ✅ 用户设置保存
- ✅ 支持离线使用（题目生成完全本地化）

---

## 🔧 技术实现

### 题目生成算法
```javascript
// utils/questionGenerator.js
QuestionGenerator.generate({
  type: 'add',        // 题型
  grade: 2,           // 年级
  count: 20,          // 题目数量
  minNum: 1,          // 最小数值
  maxNum: 100         // 最大数值
});
```

### 数据模型

**练习记录 (practiceRecords)**
```javascript
{
  id: 'pr_xxx',
  createTime: 1234567890,
  questions: [...],      // 题目列表
  answers: [...],        // 答案记录
  correctCount: 18,      // 答对数
  totalCount: 20,        // 总题数
  correctRate: 90,       // 正确率
  duration: 120,         // 用时（秒）
  settings: {...}        // 练习设置
}
```

**错题记录 (mistakes)**
```javascript
{
  id: 'm_xxx',
  question: '5 + 3',
  userAnswer: 7,
  correctAnswer: 8,
  type: 'add',
  createTime: 1234567890,
  masteredAt: null       // 掌握时间（null表示未掌握）
}
```

---

## 🚧 待开发功能

### 高优先级
1. **拍照批改功能**
   - 集成OCR识别服务（腾讯云OCR）
   - 图片预处理和裁剪
   - 识别结果展示和批改
   - 自动加入错题本

2. **PDF试卷生成**
   - 参数配置界面
   - PDF排版和生成（使用jsPDF或pdfmake）
   - 下载和分享功能

3. **自定义练习设置**
   - 完整的参数配置页面
   - 保存常用配置

### 中优先级
4. **数的分解与组合**
   - 分解模式练习
   - 组合模式练习
   - 图形化辅助展示

5. **单位换算练习**
   - 长度、重量、人民币、时间四类
   - 填空式练习

6. **学习数据可视化**
   - 正确率趋势图（7天/30天）
   - 练习时间分布
   - 题型分析

### 低优先级
7. **云同步功能**
   - 接入微信云开发
   - 云数据库存储
   - 多设备数据同步

8. **社交功能**
   - 排行榜
   - 好友PK
   - 成就系统

---

## 📝 开发步骤

### 第一步：在微信开发者工具中构建npm
```bash
# 1. 打开微信开发者工具
# 2. 点击菜单栏：工具 → 构建 npm
# 3. 等待构建完成
```

### 第二步：配置AppID
```javascript
// project.config.json
{
  "appid": "你的小程序AppID"
}
```

### 第三步：运行项目
```bash
# 1. 在微信开发者工具中打开项目目录
# 2. 选择 miniprogram 作为根目录
# 3. 点击编译运行
```

### 第四步：体验功能
1. 首页 → 点击"加法练习"开始答题
2. 完成练习查看结果
3. 查看错题本
4. 个人中心查看统计数据

---

## 🔌 OCR集成指南（待实现）

### 方案一：腾讯云OCR
```javascript
// 1. 在腾讯云控制台开通OCR服务
// 2. 获取SecretId和SecretKey
// 3. 创建云函数调用OCR API

// cloudfunctions/ocrRecognize/index.js
const cloud = require('wx-server-sdk');
const tencentcloud = require('tencentcloud-sdk-nodejs');

exports.main = async (event) => {
  const { imageBase64 } = event;
  
  // 调用腾讯云OCR API
  // ...
  
  return {
    results: [] // 识别结果
  };
};
```

### 方案二：百度AI OCR
```javascript
// 类似流程，使用百度AI SDK
```

---

## 📊 性能优化建议

1. **图片优化**
   - 压缩图片资源
   - 使用webp格式
   - 懒加载图片

2. **代码优化**
   - 避免频繁setData
   - 使用分页加载错题列表
   - 缓存计算结果

3. **体验优化**
   - 添加骨架屏loading
   - 优化动画性能
   - 减少不必要的请求

---

## 🐛 已知问题

1. tabBar图标使用了占位图片（需要设计师提供专业图标）
2. 部分功能入口显示"开发中"提示
3. 缺少数据埋点和错误监控

---

## 📞 联系与反馈

- 项目版本：v1.0.0
- 最后更新：2025-11-30
- 开发状态：核心功能已完成，扩展功能待开发

---

## 🎯 下一步计划

1. ✅ 完成核心功能（已完成）
2. 🚧 实现拍照批改（进行中）
3. 🚧 实现PDF生成（计划中）
4. 📅 优化UI细节（待排期）
5. 📅 接入云开发（待排期）

---

**祝开发顺利！如有问题，请查阅微信小程序官方文档和TDesign组件库文档。** 🎉
