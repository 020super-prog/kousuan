# 小程序启动检查清单

## 🚀 首次启动必做（10分钟）

### ✅ 步骤1: 配置云开发环境ID（2分钟）

1. 打开微信开发者工具
2. 点击顶部工具栏的"云开发"按钮
3. 复制环境ID（格式：cloud1-xxxxx）
4. 打开 `miniprogram/app.js`
5. 修改第8行：
```javascript
env: "你复制的环境ID"  // 例如: cloud1-7gp87xsj6a201b2a
```
6. 保存文件

**验证：**
```javascript
// 在控制台执行
console.log('环境ID:', getApp().globalData.env);
// 应显示你配置的ID
```

---

### ✅ 步骤2: 上传云函数（3分钟）

1. 在项目管理器中找到 `cloudfunctions/gradeEngine` 目录
2. 右键点击该目录
3. 选择"上传并部署：云端安装依赖"
4. 等待上传完成（约1-2分钟）
5. 看到"上传成功"提示

**验证：**
```javascript
// 在控制台执行
wx.cloud.callFunction({
  name: 'gradeEngine',
  data: { action: 'getAllGrades' },
  success: res => console.log('✅ 云函数正常:', res),
  fail: err => console.error('❌ 云函数异常:', err)
});
```

---

### ✅ 步骤3: 编译小程序（1分钟）

1. 点击顶部工具栏的"编译"按钮
2. 或使用快捷键 `Ctrl+B` (Windows) / `Cmd+B` (Mac)
3. 等待编译完成
4. 查看控制台是否有错误

**预期结果：**
- ✅ 编译成功
- ✅ 控制台显示"云开发初始化成功"
- ✅ 首页正常显示

---

### ✅ 步骤4: 功能验证（5分钟）

#### 4.1 测试年级选择
```bash
1. 点击首页的"一年级"按钮
2. 观察按钮变蓝色高亮
3. 观察底部Toast提示"已切换到一年级"
4. 观察题型列表更新
```

**预期结果：**
- ✅ 按钮高亮正常
- ✅ Toast提示显示
- ✅ 题型列表有4-5个按钮

---

#### 4.2 测试题目数量选择
```bash
1. 点击"50道题"按钮
2. 观察按钮变橙色高亮
3. 观察Toast提示"已设置为50道题"
```

**预期结果：**
- ✅ 按钮高亮正常
- ✅ Toast提示显示

---

#### 4.3 测试题目生成
```bash
1. 点击"20以内加法"按钮
2. 等待跳转到练习页面
3. 观察"正在生成题目..."加载状态
4. 等待1-3秒
5. 观察题目显示
```

**预期结果：**
- ✅ 页面跳转成功
- ✅ 显示加载动画
- ✅ 题目正常显示（如"5 + 3 = ?"）
- ✅ 顶部显示"1/50"（如果选了50道题）
- ✅ 计时器开始计时

---

#### 4.4 测试答题功能
```bash
1. 使用数字键盘输入答案（例如"8"）
2. 点击蓝色对勾按钮提交
3. 观察反馈动画（绿色✓ 或 红色✗）
4. 等待1秒自动进入下一题
```

**预期结果：**
- ✅ 数字输入正常
- ✅ 反馈动画显示
- ✅ 自动进入下一题

---

## 🔍 问题排查（如果验证失败）

### 问题1: 云函数调用失败
**症状：** 控制台显示 `errCode: -404005`

**解决方案：**
```bash
1. 确认云函数已上传（步骤2）
2. 打开云开发控制台
3. 点击"云函数" tab
4. 查看 gradeEngine 是否显示"已部署"
5. 如果未部署，重新执行步骤2
```

---

### 问题2: 题目不显示
**症状：** 练习页面空白或一直加载

**快速检查：**
```javascript
// 在控制台执行
const page = getCurrentPages()[getCurrentPages().length - 1];
console.log('页面数据:', {
  gradeKey: page.data.gradeKey,
  categoryId: page.data.categoryId,
  questions: page.data.questions.length,
  currentQuestion: page.data.currentQuestion
});
```

**根据输出判断：**
- 如果 `gradeKey` 或 `categoryId` 为空 → 查看 [参数传递问题](#参数传递问题)
- 如果 `questions.length` 为 0 → 查看 [云函数问题](#云函数问题)
- 如果 `currentQuestion` 为 null → 查看 [数据格式问题](#数据格式问题)

---

### 问题3: 环境ID未配置
**症状：** 控制台显示 `云环境ID: undefined`

**解决方案：**
重新执行 [步骤1](#步骤1-配置云开发环境id2分钟)

---

## 📚 详细文档索引

如果需要深入了解或遇到复杂问题，请查阅：

1. **QUICK_DIAGNOSTIC_CHECKLIST.md**  
   → 30秒快速检查 + 常见问题修复

2. **QUESTION_DISPLAY_DEBUG_GUIDE.md**  
   → 5大维度全面诊断指南

3. **QUESTION_DISPLAY_FIX_SUMMARY.md**  
   → 修复内容总结和对比

4. **HOME_UI_UPGRADE.md**  
   → 首页UI优化说明

5. **UI_TEST_GUIDE.md**  
   → UI功能测试指南

---

## ✅ 启动成功标志

当以下所有项都满足时，表示启动成功：

- [x] 云环境ID已配置
- [x] 云函数已部署
- [x] 小程序编译成功
- [x] 首页正常显示
- [x] 年级选择功能正常
- [x] 题目数量选择正常
- [x] 题目生成和显示正常
- [x] 答题功能正常
- [x] 控制台无报错

---

## 🎉 启动成功后的下一步

1. **用户测试**  
   邀请5-10个用户进行真实测试，收集反馈

2. **性能监控**  
   关注云函数响应时间和题目生成速度

3. **数据分析**  
   统计用户最常使用的年级和题型

4. **功能优化**  
   根据用户反馈进行迭代优化

---

**清单版本**: v1.0  
**最后更新**: 2025-11-30  
**预计时间**: 10-15分钟
